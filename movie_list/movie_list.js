!function(t){t.module("moviecat.list",["ngRoute"]).config(["$routeProvider",function(t){t.when("/:movieType/:page?",{templateUrl:"movie_list/view.html",controller:"listController"})}]).controller("listController",["$scope","$routeParams","$route","jsonpSrv",function(t,a,e,o){t.isLoading=!0,t.currentPage=+a.page||1;var n=t.currentPage,r=15,l=(n-1)*r;o.jsonp("https://api.douban.com/v2/movie/"+a.movieType,{start:l,count:r,q:a.q||""},function(a){t.isLoading=!1,t.totalPage=Math.ceil(a.total/r),n<1&&e.updateParams({page:1}),n>t.totalPage&&e.updateParams({page:t.totalPage}),t.datas=a,t.$apply()}),t.goPage=function(a){a<1||a>t.totalPage||e.updateParams({page:a})}}])}(angular);